---
title: "laselva"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{laselva}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---



Data sources available in `laselva`

- French IGN Institut National de L'Information Geographique et Forestiere
- [Spain][esp]
- European plots [Scientific Data paper][eupaper], [dataset][eufig]
- Australian plots [Ecology paper][auspaper], [dataset][ausfig]
- United States Forest Inventory and Analysis (FIA)
- Japan Ministry of the Environment, Monitoring Sites 1000 Project, [description][jpn]



```r
remotes::install_github("ropenscilabs/laselva")
```


```r
library(laselva)
```

## USA FIA

First, list datasets available:


```r
x <- ls_list_usa()
x
```

Then request a data for a specific state and variable:


```r
# Northern Mariana Islands - trees
ls_fetch_usa(state = "MP")
#> $MP_tree
#> # A tibble: 2,663 × 211
#>       CN PLT_CN PREV_…¹ INVYR STATECD UNITCD COUNT…²  PLOT  SUBP  TREE CONDID AZIMUTH DIST 
#>    <int> <int6> <int64> <int>   <int>  <int>   <int> <int> <int> <int>  <int> <lgl>   <lgl>
#>  1  2e14   2e14      NA  2004      69      1     100 69026     1   100      1 NA      NA   
#>  2  2e14   2e14      NA  2004      69      1     100 69026     1   101      1 NA      NA   
#>  3  2e14   2e14      NA  2004      69      1     100 69026     1   102      1 NA      NA   
#>  4  2e14   2e14      NA  2004      69      1     100 69026     1   103      1 NA      NA   
#>  5  2e14   2e14      NA  2004      69      1     100 69026     1   104      1 NA      NA   
#>  6  2e14   2e14      NA  2004      69      1     100 69026     1   105      1 NA      NA   
#>  7  2e14   2e14      NA  2004      69      1     100 69026     1   106      1 NA      NA   
#>  8  2e14   2e14      NA  2004      69      1     100 69026     1   107      1 NA      NA   
#>  9  2e14   2e14      NA  2004      69      1     100 69026     1   108      1 NA      NA   
#> 10  2e14   2e14      NA  2004      69      1     100 69026     1   109      1 NA      NA   
#> # … with 2,653 more rows, 198 more variables: PREVCOND <dbl>, STATUSCD <int>, SPCD <int>,
#> #   SPGRPCD <int>, DIA <dbl>, DIAHTCD <int>, HT <dbl>, HTCD <dbl>, ACTUALHT <dbl>,
#> #   TREECLCD <dbl>, CR <dbl>, CCLCD <dbl>, TREEGRCD <lgl>, AGENTCD <dbl>, CULL <dbl>,
#> #   DAMLOC1 <dbl>, DAMTYP1 <dbl>, DAMSEV1 <dbl>, DAMLOC2 <dbl>, DAMTYP2 <dbl>,
#> #   DAMSEV2 <dbl>, DECAYCD <dbl>, STOCKING <dbl>, WDLDSTEM <lgl>, VOLCFNET <dbl>,
#> #   VOLCFGRS <dbl>, VOLCSNET <dbl>, VOLCSGRS <dbl>, VOLBFNET <dbl>, VOLBFGRS <dbl>,
#> #   VOLCFSND <dbl>, GROWCFGS <dbl>, GROWBFSL <dbl>, GROWCFAL <dbl>, MORTCFGS <dbl>, …
# Guam - seedling
ls_fetch_usa(state = "GU", what = "seedling")
#> $GU_seedling
#> # A tibble: 628 × 32
#>         CN  PLT_CN INVYR STATECD UNITCD COUNTYCD  PLOT  SUBP CONDID  SPCD SPGRPCD STOCKING
#>    <int64> <int64> <int>   <int>  <int>    <int> <int> <int>  <int> <int>   <int>    <dbl>
#>  1    2e14   1.e14  2002      66      1       10 66007     1      1  6042      54   0.0015
#>  2    2e14   1.e14  2002      66      1       10 66007     1      1  7282      54   0.001 
#>  3    2e14   1.e14  2002      66      1       10 66007     1      1  7987      54   0.0005
#>  4    2e14   1.e14  2002      66      1       10 66007     2      1  6042      54   0.0029
#>  5    2e14   1.e14  2002      66      1       10 66007     2      1  7987      54   0.002 
#>  6    2e14   1.e14  2002      66      1       10 66007     3      1  6042      54   0.001 
#>  7    2e14   1.e14  2002      66      1       10 66007     3      1  7091      54   0.0005
#>  8    2e14   1.e14  2002      66      1       10 66007     3      1  7282      54   0.0005
#>  9    2e14   1.e14  2002      66      1       10 66007     4      1  6042      54   0.0024
#> 10    2e14   1.e14  2002      66      1       10 66007     4      1  7987      54   0.002 
#> # … with 618 more rows, and 20 more variables: TREECOUNT <int>, TOTAGE <lgl>,
#> #   CREATED_BY <chr>, CREATED_DATE <dttm>, CREATED_IN_INSTANCE <int>, MODIFIED_BY <chr>,
#> #   MODIFIED_DATE <dttm>, MODIFIED_IN_INSTANCE <int>, TREECOUNT_CALC <int>,
#> #   TPA_UNADJ <dbl>, CYCLE <int>, SUBCYCLE <int>, DAMAGE_AGENT_CD1_SRS <lgl>,
#> #   PCT_AFFECTED_DAMAGE_AGENT1_SRS <lgl>, DAMAGE_AGENT_CD2_SRS <lgl>,
#> #   PCT_AFFECTED_DAMAGE_AGENT2_SRS <lgl>, DAMAGE_AGENT_CD3_SRS <lgl>,
#> #   PCT_AFFECTED_DAMAGE_AGENT3_SRS <lgl>, AGECD_RMRS <lgl>, COUNTCHKCD_RMRS <lgl>
```

## Australia

Queensland, Australian data


```r
x <- ls_fetch_aus()
names(x)
#> [1] "AuxiliaryData.csv"       "TreeMeasurementData.csv" "UnderstoryData.csv"     
#> [4] "VoucherData.csv"
x[[1]]
#> # A tibble: 560 × 8
#>    epNumber family            genus           taxon         taxon…¹ ALA_A…² ALA_A…³ class…⁴
#>    <chr>    <chr>             <chr>           <chr>         <chr>   <chr>   <chr>   <chr>  
#>  1 EP2      Annonaceae        Melodorum       Melodorum le… Melodo… urn:ls… http:/… Climber
#>  2 EP2      Apocynaceae       Melodinus       Melodinus ba… Melodi… urn:ls… http:/… Climber
#>  3 EP2      Apocynaceae       Parsonsia       Parsonsia st… Parson… urn:ls… http:/… Climber
#>  4 EP2      Aspleniaceae      Asplenium       Asplenium ni… Asplen… urn:ls… http:/… Fern   
#>  5 EP2      Celastraceae      Hippocratea     Hippocratea … Hippoc… urn:ls… http:/… Climber
#>  6 EP2      Cyperaceae        Gahnia          Gahnia aspera Gahnia… urn:ls… http:/… Sedge  
#>  7 EP2      Dryopteridaceae   Coveniella      Coveniella p… Coveni… urn:ls… http:/… Fern   
#>  8 EP2      Dryopteridaceae   Lastreopsis     Lastreopsis … Lastre… urn:ls… http:/… Fern   
#>  9 EP2      Fabaceae          Austrosteenisia Austrosteeni… Austro… urn:ls… http:/… Climber
#> 10 EP2      Hemerocallidaceae Dianella        Dianella cae… Dianel… urn:ls… http:/… Lily   
#> # … with 550 more rows, and abbreviated variable names ¹​taxonAuth, ²​ALA_APNI_TAXON_LSID,
#> #   ³​ALA_APNI_TAXON_URI, ⁴​classification
```

## Europe

Tree inventory data for 21 countries in Europe


```r
res <- ls_fetch_eu()
#> Error in curl::curl_fetch_disk(x$url$url, x$disk, handle = x$url$handle): Operation was aborted by an application callback
names(res)
#> Error in eval(expr, envir, enclos): object 'res' not found
res$genus
#> Error in eval(expr, envir, enclos): object 'res' not found
```

## France

Tree inventory data for 21 countries in Europe


```r
res <- ls_fetch_fra(year = 2017)
names(res)
#> NULL
res[[1]]
#> [1] "'ls_fetch_fra' is deprecated.\nUse 'ls_fetch_fr_raw' instead.\nSee help(\"Deprecated\")"
```

## Spain

Tree inventory data for 17 regions in Spain


```r
res = ls_fetch_esp(location = "alava")
names(res)
#> [1] "sig_01_tcm36_293906"  "ifn3p01_tcm36_293907"
res$sig_01_tcm36_293906$Mayores_exs
#> # A tibble: 27,687 × 27
#>    Estadillo Cla   Subcl…¹ nArbol Orden…² Orden…³ Rumbo Dista…⁴ Especie Espec…⁵   Dn1   Dn2
#>        <int> <chr> <chr>    <int>   <int>   <int> <int>   <dbl>   <int>   <int> <int> <int>
#>  1         2 A     4C           1       1       0     4    3.30      28      28   118   121
#>  2         2 A     4C           2       2       0     7    8.90      28      28   124   127
#>  3         2 A     4C           3       3       0    34    6.60      28      28   168   171
#>  4         2 A     4C           4       4       0    43    4.5       28      28   158   165
#>  5         2 A     4C           5       5       0    52    8.5       28      28   173   172
#>  6         2 A     4C           6       6       0    63    6.30      28      28   170   171
#>  7         2 A     4C           7       7       0    76    8.30      28      28   144   143
#>  8         2 A     4C           8       8       0    81    1.60      28      28   109   107
#>  9         2 A     4C           9       9       0    96    7.70      28      28   204   205
#> 10         2 A     4C          10      10       0    96    4.5       28      28   132   131
#> # … with 27,677 more rows, 15 more variables: Ht <dbl>, Calidad <int>, Forma <int>,
#> #   ParEsp <int>, Agente <int>, Import <int>, Elemento <int>, Estrato <int>, CD <int>,
#> #   G <dbl>, VCC <dbl>, VSC <dbl>, IAVC <dbl>, VLE <dbl>, Fac <int>, and abbreviated
#> #   variable names ¹​Subclase, ²​OrdenIf3, ³​OrdenIf2, ⁴​Distanci, ⁵​EspecieOriginal
```

## Japan

Tree inventory data for Japan


```r
res = ls_fetch_jpn()
names(res)
#> [1] "species_list" "site_list"    "tree_data"    "metadata"
res$species_list
#> # A tibble: 365 × 6
#>    SpJapan       Name                            NameAuth            Family Synonym FuncT…¹
#>    <chr>         <chr>                           <chr>               <chr>    <int>   <int>
#>  1 maruhati      Cyathea mertensiana             Cyathea mertensian… Cyath…       1       3
#>  2 inugaya       Cephalotaxus harringtonia       Cephalotaxus harri… Cepha…       1       1
#>  3 hinoki        Chamaecyparis obtusa            Chamaecyparis obtu… Cupre…       1       1
#>  4 sugi          Cryptomeria japonica            Cryptomeria japoni… Cupre…       1       1
#>  5 nezumisasi    Juniperus rigida                Juniperus rigida S… Cupre…       1       1
#>  6 hinokiasunaro Thujopsis dolabrata var. hondai Thujopsis dolabrat… Cupre…       1       1
#>  7 hiba          Thujopsis dolabrata var. hondai Thujopsis dolabrat… Cupre…       0       1
#>  8 momi          Abies firma                     Abies firma Sieb. … Pinac…       1       1
#>  9 uraziromomi   Abies homolepis                 Abies homolepis Si… Pinac…       1       1
#> 10 oosirabiso    Abies mariesii                  Abies mariesii Mas… Pinac…       1       1
#> # … with 355 more rows, and abbreviated variable name ¹​FuncType
res$tree_data$AI_BC1
#> # A tibble: 2,322 × 38
#>    grid_xcord grid_yc…¹ tag_no indv_no stem_…² stem_…³ sp_jpn sp    gbh2004 gbh2005 gbh2006
#>         <int>     <int> <chr>  <chr>     <dbl>   <dbl> <chr>  <chr>   <dbl>   <dbl>   <dbl>
#>  1          0         0 B770   B770        2.6     5.2 aohada Ilex…    15.7    16      16.2
#>  2          0         0 B774   B774        3.4     9   aohada Ilex…    17      17.3    17.6
#>  3          0         0 B772   B772        3.4     8   akama… Pinu…    92.5    93.9    95.1
#>  4          0         0 B775   B775        2.2     3.7 akama… Pinu…   100.    103     105. 
#>  5          0         0 B786   B786        7.8     5.9 asebi  Pier…    18.4    18.7    18.6
#>  6          0         0 B792   B792        6.7     9.3 konara Quer…    67.3    68.5    68.6
#>  7          0         0 B800   B800        9.4     5   konara Quer…    63.5    63.8    64.1
#>  8          0         0 B785   B785        7.5     4.9 konara Quer…    84.3    84.7    86  
#>  9          0         0 B780   B780        2.4     1.6 konara Quer…    74.8    74.9    75.2
#> 10          0         0 B765   B765        0.7     9   konara Quer…    62.1    62.2    62.6
#> # … with 2,312 more rows, 27 more variables: gbh2007 <dbl>, gbh2008 <dbl>, gbh2009 <dbl>,
#> #   dl2004 <int>, dl2005 <int>, dl2006 <int>, dl2007 <int>, dl2008 <int>, dl2009 <int>,
#> #   rec2004 <int>, rec2005 <int>, rec2006 <int>, rec2007 <int>, rec2008 <int>,
#> #   rec2009 <int>, error2004 <int>, error2005 <int>, error2006 <int>, error2007 <int>,
#> #   error2008 <int>, error2009 <int>, s_date2004 <int>, s_date2005 <int>,
#> #   s_date2006 <int>, s_date2007 <int>, s_date2008 <int>, s_date2009 <int>, and
#> #   abbreviated variable names ¹​grid_ycord, ²​stem_xcord, ³​stem_ycord
```


[coc]: https://github.com/ropenscilabs/laselva/blob/master/.github/CODE_OF_CONDUCT.md
[auspaper]: https://doi.org/10.1890/14-0458R.1
[ausfig]: https://figshare.com/collections/Long-term_stem_inventory_data_from_tropical_rain_forest_plots_in_Australia/3307029
[eupaper]: https://doi.org/10.1038/sdata.2016.123
[eufig]: https://doi.org/10.6084/m9.figshare.c.3288407.v1
[esp]: https://www.miteco.gob.es/fr/biodiversidad/servicios/banco-datos-naturaleza/informacion-disponible/ifn3_base_datos_1_25.aspx
[jpn]: http://db.cger.nies.go.jp/JaLTER/ER_DataPapers/archives/2011/ERDP-2011-01/metadata

